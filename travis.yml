language: node_js
node_js:
  - 12
  - 10

# cache:
#   directories:
#     - "$HOME/.npm" // npm ci erases old node modules

    # stages:
#   - name: "unit tests"
#   if: branch = master

# services:
#   - docker
#   - postgresql

# before_install:
#   - npm i -g npm@latest

# install:
#   - npm ci # this is default now

# before_script:

script:
  - npm test
  - npm run build

# after_success:

# after_failure:

# before_deploy:

deploy:
- provider: heroku:git
    api_key: <encrypted api_key>
    edge: true
    app: boilerplate
    on:
      branch: master

#   - provider: s3 # s3 || Elastic Beanstalk || CodeDeploy
#     access_key_id: <encrypted access_key_id>
#     secret_access_key: <encrypted secret_access_key>
#     bucket: <bucket>
#     region: us-east-1
#     app: boilerplate #Elastic Beanstalk application name
#     application: boilerplate # CodeDeploy
#     revision_type: github # CodeDeploy
#     repository: <github repository> # CodeDeploy
#     commit_id: <commit-hash> # CodeDeploy
#     edge: true
#     description: Basic App description. #Elastic Beanstalk
#     label: 1.0.0 #Elastic Beanstalk
#     on:
#       branch: master

#   - provider: heroku:git
#   api_key: <encrypted api_key>
#     edge: true
#     app: boilerplate-staging
#     on:
#       branch: staging

# after_deploy:

# jobs:
#   include:
#     - stage: 'Release'
#       if: branch = master
#       deploy:
#         - provider: heroku:git
#           api_key: <encrypted api_key>
#           edge: true
#           app: boilerplate
#           on:
#             branch: master
#           skip_cleanup: true
#           script:
#             - npx semantic-release
